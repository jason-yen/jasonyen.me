<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Virtually Impossible Platformer Game</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding-top: 56px; /* navbar offset */
      font-family: Arial, sans-serif;
      background-color: #f5f6fa;
    }

    a {
      color: #536DFE;
      transition: 0.3s;
      text-decoration: none;
    }

    a:hover {
      transform: scale(1.05);
    }

    /* ================= NAVBAR ================= */
    .navbar {
      width: 100%;
      height: 56px;
      position: fixed;
      top: 0;
      left: 0;
      z-index: 9999;

      display: flex;
      align-items: center;
      padding: 0 40px;
      gap: 20px;

      background: rgba(200, 200, 255, 0.093);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);

      border-bottom: 1px solid rgba(200, 200, 255, 0.2);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    }

    .navbar-content {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .navbar img {
      width: 40px;
      height: 40px;
      border-radius: 12px;
      transition: transform 0.3s ease;
    }

    .navbar img:hover {
      transform: scale(1.1);
    }

    .navbar a {
      color: #536DFE;
      font-weight: 500;
    }

    .separator {
      color: #9dacff;
      font-size: 20px;
    }

    /* ================= PAGE CONTENT ================= */
    .main-title {
      font-size: 42px;
      font-weight: bold;
      margin: 40px 40px 20px 40px;
    }

    .content {
      margin: 0 40px 20px 40px;
      font-size: 18px;
      color: #4c5eaf;
    }

    /* ================= CANVAS ================= */
    canvas {
      display: block;
      margin: 20px auto 40px auto;
      background: #87CEEB;
      border: 3px solid #000;
      border-radius: 10px;
    }
  </style>
</head>
<body>

  <!-- NAVBAR -->
  <div class="navbar">
    <div class="navbar-content">
      <a href="/">
                <img src="/images/WardenmonsterLogo.png" alt="Logo">
      </a>
      <a href="/games">Games</a>
      <div class="separator">|</div>
      <a href="/tools">Tools</a>
    </div>
  </div>

  <!-- TITLE -->
  <div class="main-title">Virtually Impossible Platformer Game</div>

  <!-- DESCRIPTION -->
  <div class="content">
    Disclaimer: Press enter for dev tool (beta)
    <div id="message"></div>
  </div>

  <!-- GAME CANVAS -->
  <canvas id="gameCanvas" width="800" height="400"></canvas>

  <script>
    // Your existing platformer JS code goes here
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    const gravity = 1.2;
    const player = { x: 50, y: 300, width: 30, height: 30, color: 'red', ySpeed: 0, xSpeed: 0, grounded: false, flyMode: false, trail: [] };
    const keys = { left: false, right: false, jumpPressed: false };
    let currentLevel = 1;
    let platforms = [], spikes = [], enemies = [];

    const level1Platforms = [ { x:0,y:370,width:800,height:30 }, { x:200,y:250,width:80,height:10 }, { x:400,y:180,width:80,height:10 }, { x:600,y:100,width:80,height:10 } ];
    const level1Spikes = [ { x:300,y:355,width:30,height:15 }, { x:500,y:355,width:30,height:15 } ];
    const level1Enemies = [ { x:100,y:340,width:30,height:30,speed:2,range:100,direction:1,originX:100 } ];
    const goal = { x: canvas.width-30, y:30, radius:20, color:'gold' };

    function resetPlayer() { player.x=50; player.y=300; player.xSpeed=0; player.ySpeed=0; player.grounded=false; player.flyMode=false; player.trail=[]; }

    function switchLevel() {
      const distance = Math.sqrt((player.x + player.width/2 - goal.x)**2 + (player.y + player.height/2 - goal.y)**2);
      if(distance <= goal.radius + player.width/2){
        currentLevel++;
        resetPlayer();
        if(currentLevel===2){ /* load level2 platforms/spikes/enemies */ }
        else if(currentLevel===3){ /* load level3 platforms/spikes/enemies */ }
        else { alert("You've completed all levels!"); currentLevel=1; platforms=level1Platforms; spikes=level1Spikes; enemies=level1Enemies; }
      }
    }

    document.addEventListener('keydown', e=>{
      if(e.code==='ArrowLeft') keys.left=true;
      if(e.code==='ArrowRight') keys.right=true;
      if(e.code==='Space'){ if(!keys.jumpPressed && player.grounded){ player.ySpeed=-18; player.grounded=false; } keys.jumpPressed=true; }
      if(e.code==='Enter'){ player.flyMode=!player.flyMode; if(player.flyMode) player.ySpeed=-5; }
    });

    document.addEventListener('keyup', e=>{
      if(e.code==='ArrowLeft') keys.left=false;
      if(e.code==='ArrowRight') keys.right=false;
      if(e.code==='Space') keys.jumpPressed=false;
    });

    function updateEnemies(){ for(const e of enemies){ e.x += e.speed*e.direction; if(e.x>e.originX+e.range||e.x<e.originX) e.direction*=-1; } }

    function updatePlayer(){
      player.xSpeed=0; if(keys.left) player.xSpeed=-5; if(keys.right) player.xSpeed=5;
      if(!player.flyMode) player.ySpeed+=gravity; else player.ySpeed=-3;
      player.x+=player.xSpeed; player.y+=player.ySpeed;
      player.grounded=false;
      for(const p of platforms){
        if(player.x<p.x+p.width && player.x+player.width>p.x && player.y+player.height<=p.y+player.ySpeed && player.y+player.height+player.ySpeed>p.y){
          player.y=p.y-player.height; player.ySpeed=0; player.grounded=true;
        }
      }
      if(player.x<0) player.x=0; if(player.x+player.width>canvas.width) player.x=canvas.width-player.width;
      for(const s of spikes){
        if(player.x<s.x+s.width && player.x+player.width>s.x && player.y<s.y+s.height && player.y+player.height>s.y){ resetPlayer(); }
      }
      for(const e of enemies){
        if(player.x<e.x+e.width && player.x+player.width>e.x && player.y<e.y+e.height && player.y+player.height>e.y){ resetPlayer(); }
      }
      if(player.flyMode){ player.trail.push({x:player.x,y:player.y}); if(player.trail.length>10) player.trail.shift(); }
    }

    function draw(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      if(player.flyMode){ ctx.fillStyle='rgba(255,255,0,0.5)'; for(const t of player.trail){ ctx.beginPath(); ctx.arc(t.x+player.width/2,t.y+player.height/2,5,0,Math.PI*2); ctx.fill(); } }
      ctx.fillStyle=player.color; ctx.fillRect(player.x,player.y,player.width,player.height);
      ctx.fillStyle='green'; for(const p of platforms) ctx.fillRect(p.x,p.y,p.width,p.height);
      ctx.fillStyle='black'; for(const s of spikes){ ctx.beginPath(); ctx.moveTo(s.x,s.y+s.height); ctx.lineTo(s.x+s.width/2,s.y); ctx.lineTo(s.x+s.width,s.y+s.height); ctx.closePath(); ctx.fill(); }
      ctx.fillStyle='purple'; for(const e of enemies) ctx.fillRect(e.x,e.y,e.width,e.height);
      ctx.beginPath(); ctx.arc(goal.x,goal.y,goal.radius,0,Math.PI*2); ctx.fillStyle=goal.color; ctx.fill(); ctx.closePath();
    }

    function gameLoop(){ updatePlayer(); updateEnemies(); draw(); switchLevel(); requestAnimationFrame(gameLoop); }

    platforms=level1Platforms; spikes=level1Spikes; enemies=level1Enemies;
    gameLoop();
  </script>
</body>
</html>
